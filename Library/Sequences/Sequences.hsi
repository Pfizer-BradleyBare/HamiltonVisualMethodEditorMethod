// {{{ 2 "IncludeGuard" "PragmaOnce"
#pragma once
// }} ""
#include "HSLDevLib.hsl"
#include "HSLStrLib.hsl"
#include "HSLTrcLib.hsl"
#include "C:\\Program Files (x86)\\HAMILTON\\BAREB\\Script\\HamiltonVisualMethodEditor\\HamiltonVisualMethodEditorMethod\\Library\\Tools\\Tools.hs_"
#include "HSLUtilLib2.hsl"
#include "HSLSeqLib.hsl"
/* {{ 2 "LibraryInsertLine" "" */ // }} ""
// {{ 2 "TemplateIncludeBlock" ""
#include "HSLMETEDLib.hs_"
#include "HSLMECCLib.hs_"
#include "HSLPTLLib.hsl"
// }} ""
// {{{ 2 "LibraryNamespace" "Begin"
namespace SEQUENCES {
// }} ""
/* {{ 2 "VariableInsertLine" "" */ // }} ""
// {{{ 2 "SubmethodForwardDeclaration" ""
function CheckSequences( device & ML_STAR, variable & SequenceStringsArray[] ) void ;
function SequenceToNameString( device & ML_STAR, sequence & i_SequencesArray[], variable & o_SequenceNameStringsArray[] ) variable ;
function StringToSequence( device & ML_STAR, variable & i_SequenceStringsArray[], sequence & o_SequencesArray[] ) variable ;
// }} ""
function _InitLibrary() {
// {{ 2 "AutoInitBlock" ""
PTL::SetWashingStateDefault("RinseTime1", 5);
PTL::SetWashingStateDefault("SoakTime1", 5);
PTL::SetWashingStateDefault("FlowRate1", 11);
PTL::SetWashingStateDefault("RinseTime2", 0);
PTL::SetWashingStateDefault("SoakTime2", 0);
PTL::SetWashingStateDefault("FlowRate2", 11);
PTL::SetWashingStateDefault("DrainingTime", 10);
PTL::SetWashingStateDefault("StartWashLiquid", 0);
PTL::SetLoadingStateDefault("RecoveryOptionContinue", hslTrue);
PTL::SetLoadingStateDefault("RecoveryOptionExclude", hslTrue);
PTL::SetLoadingStateDefault("RecoveryOptionDefault", 0);
PTL::SetLoadingStateDefault("KitLotCheckEnabled", hslFalse);
TOOLS::_InitLibrary();
// }} ""
}
function _ExitLibrary() {
// {{ 2 "AutoExitBlock" ""
TOOLS::_ExitLibrary();
// }} ""
}
// {{{ 5 "StringToSequence" "Begin"
function StringToSequence( device & ML_STAR, variable & i_SequenceStringsArray[], sequence & o_SequencesArray[] ) variable {
// }} ""
private variable NumSequenceStrings;
private variable Counter;
private variable Count;
private variable ret;
private variable BadSequenceIndices;
// {{ 5 "StringToSequence" "InitLocals"
o_SequencesArray.SetSize( 0);
// }} ""
// {{ 24 1 0 "0414f070_0ded_4e0e_8fa848b32d931b2f" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
NumSequenceStrings=i_SequenceStringsArray.GetSize();
// }} ""
// {{ 25 1 0 "7d1fa5b2_f7ed_4dfc_bfda9b595d98efd9" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
o_SequencesArray.SetSize(NumSequenceStrings);
// }} ""
// {{ 26 1 0 "db322bf1_b375_4736_aacb6cf1c24a3dd8" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
BadSequenceIndices = Translate("");
// }} ""
// {{ 27 1 0 "d250bf26_013b_473d_95378236c07b4bee" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
Count = 0;
// }} ""
// {{ 28 1 0 "dd4811ae_ac8a_4b78_a26f4694cf265279" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(Counter = 0; Counter < NumSequenceStrings;)
{
Counter = Counter + 1;
// }} ""
// {{ 29 1 0 "6b333205_e457_458d_876153c120f07e0c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_SequenceStringsArray.ElementAt( Counter -1) == "True")
{
// }} ""
// {{ 30 1 0 "26b0459e_9798_4108_adce1f74ea32c725" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
Count = Count + 1;
// }} ""
// {{ 31 1 0 "6b333205_e457_458d_876153c120f07e0c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 32 1 0 "30c8b43b_557c_4695_b40509614705ceee" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_SequenceStringsArray.ElementAt( Counter -1) == "False")
{
// }} ""
// {{ 33 1 0 "d9e7b9f9_1d6f_4fc5_9e184cb76e2dd961" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
Count = Count + 1;
// }} ""
// {{ 34 1 0 "30c8b43b_557c_4695_b40509614705ceee" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 35 1 0 "3ddc7f29_df42_4c23_acccca68b14ab40d" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
ret = DevGetSequenceRef(ML_STAR, i_SequenceStringsArray.ElementAt( Counter -1), o_SequencesArray.ElementAt( Counter -1));
// }} ""
// {{ 36 1 0 "3ae26990_6049_4317_91b973bf401a9451" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (ret != 0)
{
// }} ""
// {{ 37 1 0 "223bb4d8_9dc3_4c9b_8d052047c67d76a1" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
Count = Count + 1;
// }} ""
// {{ 38 1 0 "3ae26990_6049_4317_91b973bf401a9451" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 39 1 0 "8951c31c_f2b7_47ed_80f1e45124c37ab0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
BadSequenceIndices = StrConcat4(BadSequenceIndices, Counter, Translate(""), Translate(","));
// }} ""
// {{ 40 1 0 "3ae26990_6049_4317_91b973bf401a9451" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 41 1 0 "30c8b43b_557c_4695_b40509614705ceee" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 42 1 0 "6b333205_e457_458d_876153c120f07e0c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 43 1 0 "dd4811ae_ac8a_4b78_a26f4694cf265279" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{{ 44 1 0 "71a953ef_beeb_4268_a9668939871a358c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
StrTrimRight(BadSequenceIndices, Translate(","));
// }} ""
// {{ 45 1 0 "99277f0f_329c_4ec4_9c63dd6cacea5cd6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (Count == NumSequenceStrings)
{
// }} ""
// {{{ 46 1 0 "8cc07fed_bbc9_4e7a_bc92364757b33824" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (Translate("True"));
// }} ""
// {{ 47 1 0 "99277f0f_329c_4ec4_9c63dd6cacea5cd6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 48 1 0 "af88fc93_d741_4694_a582fba81244eae9" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (BadSequenceIndices);
// }} ""
// {{ 49 1 0 "99277f0f_329c_4ec4_9c63dd6cacea5cd6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "StringToSequence" "End"
}
// }} ""
// {{{ 5 "CheckSequences" "Begin"
function CheckSequences( device & ML_STAR, variable & SequenceStringsArray[] ) void {
// }} ""
private sequence Trash[];
private variable Return;
private variable Counter;
private variable NumBadSequences;
private variable Index;
private variable BadSequences[];
private variable BadSequenceIndices[];
// {{ 5 "CheckSequences" "InitLocals"
// }} ""
// {{{ 1 1 0 "cfd2e678_a8a9_4477_97349ae8a2b0eb13" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
Return = StringToSequence(ML_STAR, SequenceStringsArray, Trash);
// }} ""
// {{ 2 1 0 "df8e4d06_b5fb_4b6c_af122e2a9d4d04fd" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (Return != "True")
{
// }} ""
// {{{ 3 1 0 "8231c181_0057_42c7_bc683b28a00fe6a2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TOOLS::ParseDelimitedList(Translate(","), Return, BadSequenceIndices);
// }} ""
// {{ 4 1 0 "270f7bf4_0413_457e_a7d12ccf52f4d4ef" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
NumBadSequences=BadSequenceIndices.GetSize();
// }} ""
// {{ 5 1 0 "2a214366_c392_4619_9f7a9435bd574456" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
BadSequences.SetSize(0);
// }} ""
// {{ 6 1 0 "83ace01a_12cf_4e4a_86156aecbb04e14c" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(Counter = 0; Counter < NumBadSequences;)
{
Counter = Counter + 1;
// }} ""
// {{{ 7 1 0 "2532e826_1b83_41a0_a885407022164676" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Index = StrIVal(BadSequenceIndices.ElementAt( Counter -1));
// }} ""
// {{ 8 1 0 "afdd7cf6_59bb_4438_a88f7c777278824f" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
BadSequences.AddAsLast(SequenceStringsArray.ElementAt( Index -1));
// }} ""
// {{ 9 1 0 "83ace01a_12cf_4e4a_86156aecbb04e14c" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{{ 10 1 0 "8dd4d372_172c_4283_b6d665ecfdbb3831" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("*******************************************************************"), Translate("ATTENTION*******************************************************************"));
// }} ""
// {{{ 11 1 0 "f8242224_c09c_49fd_9e56f16fa0d92fa7" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("These sequences are not found in the deck layout. Please check the config file and try again..."), BadSequences);
// }} ""
// {{{ 12 1 0 "7254bf75_777b_424d_8dc42a21d6451fd2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("*******************************************************************"), Translate("ATTENTION*******************************************************************"));
// }} ""
// {{ 13 1 0 "3c7b0d21_1516_49e6_9ce040e481bd9e29" "{930D6C31-8EFB-11d4-A3BA-002035848439}"
abort;
// }} ""
// {{ 14 1 0 "df8e4d06_b5fb_4b6c_af122e2a9d4d04fd" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "CheckSequences" "End"
}
// }} ""
// {{{ 5 "SequenceToNameString" "Begin"
function SequenceToNameString( device & ML_STAR, sequence & i_SequencesArray[], variable & o_SequenceNameStringsArray[] ) variable {
// }} ""
private variable NumSequenceStrings;
private variable Counter;
private variable Name;
// {{ 5 "SequenceToNameString" "InitLocals"
o_SequenceNameStringsArray.SetSize( 0);
// }} ""
// {{ 16 1 0 "d96943ff_bb17_4c7a_877c3d856cf423d9" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
NumSequenceStrings=i_SequencesArray.GetSize();
// }} ""
// {{ 17 1 0 "15e1457c_f395_49fe_8711c9ba719292d5" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
o_SequenceNameStringsArray.SetSize(NumSequenceStrings);
// }} ""
// {{ 18 1 0 "602c84d1_57bf_45b0_ac87dd86ff83fc54" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(Counter = 0; Counter < NumSequenceStrings;)
{
Counter = Counter + 1;
// }} ""
// {{{ 19 1 0 "16281083_8387_41bf_861d38418c8aa8c8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Name = SeqGetName(i_SequencesArray.ElementAt( Counter -1));
// }} ""
// {{ 20 1 0 "7034e781_b9d4_46b5_aad432db9b5cac03" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
o_SequenceNameStringsArray.SetAt(Counter-1, Name);
// }} ""
// {{ 21 1 0 "602c84d1_57bf_45b0_ac87dd86ff83fc54" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{{ 22 1 0 "9ac922b4_eae7_4d78_a08bb64829d021c4" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (Translate("True"));
// }} ""
// {{{ 5 "SequenceToNameString" "End"
}
// }} ""
/* {{ 2 "SubmethodInsertLine" "" */ // }} ""
// {{{ 2 "LibraryNamespace" "End"
} // library namespace
// }} ""
// $$author=BAREB$$valid=0$$time=2022-01-24 12:57$$checksum=16e89d87$$length=084$$